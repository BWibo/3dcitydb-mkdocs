
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Database functions installed with 3DCityDB">
      
      
        <meta name="author" content="3DCityDB Steering Group">
      
      
        <link rel="canonical" href="https://otherdocs.brunowillenborg.de/v2.0.5/3dcitydb/db-functions/">
      
      
        <link rel="prev" href="../db-scripts/">
      
      
        <link rel="next" href="../docker/">
      
      
      <link rel="icon" href="../../assets/img/logos/3dcitydb-logo-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Database functions - 3D City Database v5 documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#delete-functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://github.com/3dcitydb/3dcitydb-mkdocs" title="3D City Database v5 documentation" class="md-header__button md-logo" aria-label="3D City Database v5 documentation" data-md-component="logo">
      
  <img src="../../assets/img/logos/3dcitydb-logo-transparent.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            3D City Database v5 documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Database functions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/bwibo/3dcitydb-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bwibo/3dcitydb-mkdocs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Welcome

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../first-steps/" class="md-tabs__link">
          
  
  
    
  
  First steps

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  3D City Database

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../citydb-tool/" class="md-tabs__link">
          
  
  
    
  
  citydb-tool

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../partners/" class="md-tabs__link">
          
  
  
    
  
  Partners

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://github.com/3dcitydb/3dcitydb-mkdocs" title="3D City Database v5 documentation" class="md-nav__button md-logo" aria-label="3D City Database v5 documentation" data-md-component="logo">
      
  <img src="../../assets/img/logos/3dcitydb-logo-transparent.png" alt="logo">

    </a>
    3D City Database v5 documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bwibo/3dcitydb-mkdocs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    bwibo/3dcitydb-mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Welcome
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get the software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compatibility and data migration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage-contrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage and contribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../first-steps/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    First steps
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            First steps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up a 3DCityDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/citydb-tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using citydb-tool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/docker/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.81 10.25c-.06-.04-.56-.43-1.64-.43-.28 0-.56.03-.84.08-.21-1.4-1.38-2.11-1.43-2.14l-.29-.17-.18.27c-.24.36-.43.77-.51 1.19-.2.8-.08 1.56.33 2.21-.49.28-1.29.35-1.46.35H2.62c-.34 0-.62.28-.62.63 0 1.15.18 2.3.58 3.38.45 1.19 1.13 2.07 2 2.61.98.6 2.59.94 4.42.94.79 0 1.61-.07 2.42-.22 1.12-.2 2.2-.59 3.19-1.16A8.3 8.3 0 0 0 16.78 16c1.05-1.17 1.67-2.5 2.12-3.65h.19c1.14 0 1.85-.46 2.24-.85.26-.24.45-.53.59-.87l.08-.24zm-17.96.99h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H3.85c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.43 0h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H6.28c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.47 0h1.75c.1 0 .17-.07.17-.16V9.5c0-.08-.06-.16-.17-.16H8.75c-.08 0-.15.07-.15.16v1.58c0 .09.06.16.15.16m2.44 0h1.77c.08 0 .15-.07.15-.16V9.5c0-.08-.06-.16-.15-.16h-1.77c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16M6.28 9h1.76c.08 0 .16-.09.16-.18V7.25c0-.09-.07-.16-.16-.16H6.28c-.09 0-.16.06-.16.16v1.57c.01.09.07.18.16.18m2.47 0h1.75c.1 0 .17-.09.17-.18V7.25c0-.09-.06-.16-.17-.16H8.75c-.08 0-.15.06-.15.16v1.57c0 .09.06.18.15.18m2.44 0h1.77c.08 0 .15-.09.15-.18V7.25c0-.09-.07-.16-.15-.16h-1.77c-.08 0-.15.06-.15.16v1.57c0 .09.07.18.15.18m0-2.28h1.77c.08 0 .15-.07.15-.16V5c0-.1-.07-.17-.15-.17h-1.77c-.08 0-.15.06-.15.17v1.56c0 .08.07.16.15.16m2.46 4.52h1.76c.09 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16h-1.76c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16"/></svg>
  
  <span class="md-ellipsis">
    Using Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../first-steps/migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration from previous versions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    3D City Database
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            3D City Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Relational schema
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Relational schema
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relational-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schema overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../geometry-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geometry module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appearance-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appearance module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metadata-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metadata module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../codelist-module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Codelist module
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db-scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database scripts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Database functions
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Database functions
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Table of content">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of content
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delete-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Delete functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminate-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Terminate functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#envelope-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Envelope functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crs-functions" class="md-nav__link">
    <span class="md-ellipsis">
      CRS functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-constraint-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Database constraint functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utility-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Utility functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.81 10.25c-.06-.04-.56-.43-1.64-.43-.28 0-.56.03-.84.08-.21-1.4-1.38-2.11-1.43-2.14l-.29-.17-.18.27c-.24.36-.43.77-.51 1.19-.2.8-.08 1.56.33 2.21-.49.28-1.29.35-1.46.35H2.62c-.34 0-.62.28-.62.63 0 1.15.18 2.3.58 3.38.45 1.19 1.13 2.07 2 2.61.98.6 2.59.94 4.42.94.79 0 1.61-.07 2.42-.22 1.12-.2 2.2-.59 3.19-1.16A8.3 8.3 0 0 0 16.78 16c1.05-1.17 1.67-2.5 2.12-3.65h.19c1.14 0 1.85-.46 2.24-.85.26-.24.45-.53.59-.87l.08-.24zm-17.96.99h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H3.85c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.43 0h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H6.28c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.47 0h1.75c.1 0 .17-.07.17-.16V9.5c0-.08-.06-.16-.17-.16H8.75c-.08 0-.15.07-.15.16v1.58c0 .09.06.16.15.16m2.44 0h1.77c.08 0 .15-.07.15-.16V9.5c0-.08-.06-.16-.15-.16h-1.77c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16M6.28 9h1.76c.08 0 .16-.09.16-.18V7.25c0-.09-.07-.16-.16-.16H6.28c-.09 0-.16.06-.16.16v1.57c.01.09.07.18.16.18m2.47 0h1.75c.1 0 .17-.09.17-.18V7.25c0-.09-.06-.16-.17-.16H8.75c-.08 0-.15.06-.15.16v1.57c0 .09.06.18.15.18m2.44 0h1.77c.08 0 .15-.09.15-.18V7.25c0-.09-.07-.16-.15-.16h-1.77c-.08 0-.15.06-.15.16v1.57c0 .09.07.18.15.18m0-2.28h1.77c.08 0 .15-.07.15-.16V5c0-.1-.07-.17-.15-.17h-1.77c-.08 0-.15.06-.15.17v1.56c0 .08.07.16.15.16m2.46 4.52h1.76c.09 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16h-1.76c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16"/></svg>
  
  <span class="md-ellipsis">
    3DCityDB Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../citydb-tool/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    citydb-tool
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            citydb-tool
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Import command
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Import command
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/import/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/import-citygml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CityGML import
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/import-cityjson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CityJSON import
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Export command
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Export command
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/export-citygml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CityGML export
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/export-cityjson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CityJSON export
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/delete/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/index-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    JSON configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            JSON configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/import-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/export-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/delete-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/cql2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CQL2 query language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../citydb-tool/docker/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.81 10.25c-.06-.04-.56-.43-1.64-.43-.28 0-.56.03-.84.08-.21-1.4-1.38-2.11-1.43-2.14l-.29-.17-.18.27c-.24.36-.43.77-.51 1.19-.2.8-.08 1.56.33 2.21-.49.28-1.29.35-1.46.35H2.62c-.34 0-.62.28-.62.63 0 1.15.18 2.3.58 3.38.45 1.19 1.13 2.07 2 2.61.98.6 2.59.94 4.42.94.79 0 1.61-.07 2.42-.22 1.12-.2 2.2-.59 3.19-1.16A8.3 8.3 0 0 0 16.78 16c1.05-1.17 1.67-2.5 2.12-3.65h.19c1.14 0 1.85-.46 2.24-.85.26-.24.45-.53.59-.87l.08-.24zm-17.96.99h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H3.85c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.43 0h1.76c.08 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16H6.28c-.09 0-.16.07-.16.16v1.58c.01.09.07.16.16.16m2.47 0h1.75c.1 0 .17-.07.17-.16V9.5c0-.08-.06-.16-.17-.16H8.75c-.08 0-.15.07-.15.16v1.58c0 .09.06.16.15.16m2.44 0h1.77c.08 0 .15-.07.15-.16V9.5c0-.08-.06-.16-.15-.16h-1.77c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16M6.28 9h1.76c.08 0 .16-.09.16-.18V7.25c0-.09-.07-.16-.16-.16H6.28c-.09 0-.16.06-.16.16v1.57c.01.09.07.18.16.18m2.47 0h1.75c.1 0 .17-.09.17-.18V7.25c0-.09-.06-.16-.17-.16H8.75c-.08 0-.15.06-.15.16v1.57c0 .09.06.18.15.18m2.44 0h1.77c.08 0 .15-.09.15-.18V7.25c0-.09-.07-.16-.15-.16h-1.77c-.08 0-.15.06-.15.16v1.57c0 .09.07.18.15.18m0-2.28h1.77c.08 0 .15-.07.15-.16V5c0-.1-.07-.17-.15-.17h-1.77c-.08 0-.15.06-.15.17v1.56c0 .08.07.16.15.16m2.46 4.52h1.76c.09 0 .16-.07.16-.16V9.5c0-.08-.07-.16-.16-.16h-1.76c-.08 0-.15.07-.15.16v1.58c0 .09.07.16.15.16"/></svg>
  
  <span class="md-ellipsis">
    citydb-tool Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../partners/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Partners
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Partners
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partners/tum-gis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chair of Geoinformatics, TUM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partners/hft-stuttgart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HFT Stuttgart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partners/list-eco/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LIST Eco
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partners/moss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    M.O.S.S.
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partners/vcs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual City Systems
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Table of content">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of content
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delete-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Delete functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminate-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Terminate functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#envelope-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Envelope functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crs-functions" class="md-nav__link">
    <span class="md-ellipsis">
      CRS functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-constraint-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Database constraint functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utility-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Utility functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
        <a href="../../tags/#tag:3dcitydb" class="md-tag">3dcitydb</a>
      
    
      
      
      
        <a href="../../tags/#tag:database-functions" class="md-tag">database functions</a>
      
    
  </nav>


  
  


  <h1>Database functions</h1>

<p>The 3DCityDB <code>v5</code> includes a set of database-side functions that are automatically installed during setup. These functions
perform and expose various database operations, such as deleting or terminating city objects, computing their envelopes,
and managing the Coordinate Reference System (<abbr title="Coordinate Reference System">CRS</abbr>) of the 3DCityDB instance. Additionally, they include utility and
helper functions. The functions can be used to automate processes and workflows or be integrated into third-party
tools for task automation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For PostgreSQL, the functions are written in <code>PL/pgSQL</code> and reside in a dedicated <code>citydb_pkg</code> schema. Since
<code>citydb_pkg</code> is automatically added to the database <code>search_path</code> during setup, they can be called without explicitly
specifying the schema as a prefix.</p>
</div>
<h2 id="delete-functions">Delete functions<a class="headerlink" href="#delete-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The delete functions enable the removal of single or multiple city objects while automatically managing integrity
constraints between database tables. They serve as low-level APIs, providing dedicated delete functions for various
tables â€” from individual geometries in the <a href="../geometry-module/#geometry_data-table"><code>GEOMETRY_DATA</code></a> table
(<code>delete_geometry_data</code> function) to entire features in the <a href="../feature-module/#feature-table"><code>FEATURE</code></a>
table, alongside their properties, geometries, and appearances (<code>delete_feature</code> function). These functions enable
users to develop more complex delete operations without reimplementing their core functionality.</p>
<p>The available delete functions are listed below.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>cleanup_schema</code></strong> <br/><code>(schema_name TEXT)</code></td>
<td><code>void</code></td>
<td>Truncates all data tables</td>
</tr>
<tr>
<td><strong><code>delete_feature</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>FEATURE</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_property</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>PROPERTY</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_geometry_data</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>GEOMETRY_DATA</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_implicit_geometry</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>IMPLICIT_GEOMETRY</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_appearance</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>APPEARANCE</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_surface_data</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>SURFACE_DATA</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_tex_image</code></strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>TEX_IMAGE</code> table<br/>based on an <code>id</code> or <code>id</code> array</td>
</tr>
<tr>
<td><strong><code>delete_address</code>  </strong><br/><code>(pid bigint, schema_name TEXT)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Deletes entries from <code>ADDRESS</code> table<br/>based on an id or id array</td>
</tr>
</tbody>
</table>
<p>The delete functions are provided in two forms:</p>
<ul>
<li>
<p><strong>Deletion of single entries:</strong> One variant accepts the primary key <code>id</code> of a single entry to be deleted and returns the <code>id</code>
value if the deletion is successful. If <code>NULL</code> is returned, it indicates that the entry has either already been deleted or
an error occurred during the deletion process.</p>
</li>
<li>
<p><strong>Deletion of multiple entries:</strong> The other variant accepts an array of <code>id</code> values, returning the id values of the
successfully deleted entries as a <code>SETOF BIGINT</code>, allowing multiple entries to be deleted in a single operation.</p>
</li>
</ul>
<p>All functions offer an optional <code>schema_name</code> parameter, allowing you to apply them to different database schemas within your
PostgreSQL database. The provided target schema must contain a 3DCityDB <code>v5</code> instance. If the <code>schema_name</code> is omitted,
the default schema <code>citydb</code> will be used.</p>
<p>The example below demonstrates how to easily delete features based on a query result:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">-- delete a single feature by id</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">delete_feature</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">-- delete multiple features by passing an array of ids</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">delete_feature</span><span class="p">(</span><span class="n">array_agg</span><span class="p">(</span><span class="n">id</span><span class="p">))</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">;</span>
</span></code></pre></div>
<p>The <code>id</code>-array based delete functions require fewer <code>DELETE</code> statements and may therefore be faster than deleting the same
number of entries by invoking the delete function for each individual <code>id</code>. However, this is not always the case and
depends on the ratio between the number of entries to be deleted and the total number of objects in the database. For
example, if the <code>id</code> array is very large and covers a significant portion of the table, it may be more efficient to use the
single-<code>id</code> version or delete entries in smaller batches.</p>
<p>The following example demonstrates how to create a custom function to delete all buildings from the 3DCityDB
using the single-<code>id</code> version of <code>delete_feature</code>:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">-- example procedure for deleting all building features</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">DO</span><span class="w"> </span><span class="err">$$</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">DECLARE</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="n">rec</span><span class="w"> </span><span class="n">RECORD</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">BEGIN</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="k">FOR</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">objectclass_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">901</span><span class="w"> </span><span class="n">LOOP</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="c1">-- call the delete_feature function for each id</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="n">PERFORM</span><span class="w"> </span><span class="n">delete_feature</span><span class="p">(</span><span class="n">rec</span><span class="p">.</span><span class="n">id</span><span class="p">);</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="k">END</span><span class="w"> </span><span class="n">LOOP</span><span class="p">;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="k">END</span><span class="w"> </span><span class="err">$$</span><span class="p">;</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When deleting a feature, all its "contained" subfeatures, which are considered a part of the feature, are deleted as
well. However, features that are only "related" but not considered a part of the feature are not deleted. The
distinction between "contained" and "related" features is determined by evaluating the <code>val_relation_type</code> column of the
<code>PROPERTY</code> table, as described <a href="../feature-module/#relationships">here</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code>cleanup_schema</code> function serves a specific purpose: it <strong>truncates all database tables</strong> with a single function call.
This is the most convenient and fastest way to delete all content from your 3DCityDB <code>v5</code>. However, be cautious when using
this function, as it cannot be rolled back.</p>
</div>
<h2 id="terminate-functions">Terminate functions<a class="headerlink" href="#terminate-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The delete functions physically remove city objects from the 3DCityDB instance, helping keep the database streamlined
and focused on the most recent versions of features. However, in some cases, it may be preferable to retain the feature
history and avoid deleting outdated versions. For such use cases, the 3DCityDB provides additional terminate functions.
These functions do not physically delete features but instead mark them as terminated by setting their <code>terminate_date</code>
property to the timestamp of the operation. Alongside the <code>creation_date</code> timestamp, the lifespan of the feature in the
database can be tracked, allowing multiple historical versions of the same feature to be stored alongside its most
recent version.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>terminate_feature</code></strong><br/><code>(pid bigint, schema_name TEXT, metadata JSON, cascade BOOLEAN)</code> or <br/> <code>(pid_array bigint[], schema_name TEXT, metadata JSON, cascade BOOLEAN)</code></td>
<td><code>BIGINT</code> or<br/><code>SETOF BIGINT</code></td>
<td>Terminates features in the <code>FEATURE</code> table based on an <code>id</code> or <code>id</code> array</td>
</tr>
</tbody>
</table>
<p>Since the <code>creation_date</code> and <code>termination_date</code> columns are exclusive to the <a href="../feature-module/#feature-table"><code>FEATURE</code></a>
table, only the <code>terminate_feature</code> function is available for terminating features. Like the delete functions, this
function accepts either a single <code>id</code> or an array of <code>id</code> values and returns the <code>id</code> values of successfully terminated
features, as described above.</p>
<p>The <code>FEATURE</code> table provides additional metadata columns for features, including <code>last_modification_date</code>, <code>lineage</code>,
<code>reason_for_update</code>, and <code>updating_person</code> (see <a href="../feature-module/#feature-table">here</a> for more details).
The terminate functions allow you to update these values by passing a JSON object as <code>metadata</code> parameter,
where each property represents the column name and its corresponding value is the updated data. When omitting
single columns in the JSON object or the entire JSON object, the values currently stored in these columns remain
unchanged, with the only exception that <code>last_modification_date</code> will be set to the same timestamp as <code>termination_date</code>.</p>
<p>The last parameter, <code>cascade</code>, is used to specify whether "contained" subfeatures should also be terminated (default:
<code>true</code>). Terminating all subfeatures can take significantly longer than just terminating the feature itself, so it is
important to evaluate whether cascading termination is necessary based on your use cases and scenarios.</p>
<p>The following example demonstrates how to terminate a single feature based on its database <code>id</code>.</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">terminate_feature</span><span class="p">(</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="mi">2060316</span><span class="p">,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="s1">&#39;{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="s1">        &quot;reason_for_update&quot;: &quot;test reason&quot;,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="s1">        &quot;updating_peron&quot;: &quot;test person&quot;,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="s1">        &quot;lineage&quot;: &quot;test lineage&quot;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="s1">    }&#39;</span><span class="p">::</span><span class="n">json</span><span class="p">,</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="k">FALSE</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">);</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When terminating features, make sure the tools you are using correctly evaluate the <code>termination_date</code> timestamp. This is
essential when exporting or processing features to ensure that the tools are working with the correct version of the
feature. The <a href="../../citydb-tool/"><code>citydb-tool</code></a> included in 3DCityDB <code>v5</code> fully supports feature histories based on the
<code>creation_date</code> and <code>termination_date</code> properties.</p>
</div>
<h2 id="envelope-functions">Envelope functions<a class="headerlink" href="#envelope-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The <code>citydb_pkg</code> package offers functions for calculating the 3D bounding box of features and implicit geometries, as well
as additional utility functions to support these operations.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>get_feature_envelope</code></strong><br/> <code>(fid BIGINT, set_envelope INTEGER, schema_name TEXT)</code></td>
<td><code>GEOMETRY</code></td>
<td>Returns the envelope geometry of a given feature</td>
</tr>
<tr>
<td><strong><code>calc_implicit_geometry_envelope</code></strong><br/> <code>(gid BIGINT, ref_pt GEOMETRY, matrix JSON, schema_name TEXT)</code></td>
<td><code>GEOMETRY</code></td>
<td>Returns the envelope geometry of a given implicit geometry</td>
</tr>
<tr>
<td><strong><code>box2envelope</code></strong><br/> <code>(box BOX3D, schema_name TEXT)</code></td>
<td><code>GEOMETRY</code></td>
<td>Converts a box geometry to to envelope</td>
</tr>
<tr>
<td><strong><code>update_bounds</code></strong><br/> <code>(old_bbox GEOMETRY, new_bbox GEOMETRY, schema_name TEXT)</code></td>
<td><code>GEOMETRY</code></td>
<td>Returns the envelope geometry of two bounding boxes</td>
</tr>
</tbody>
</table>
<p>The <code>get_feature_envelope</code> function computes and returns the envelope of a feature. The feature's primary key <code>id</code> must be
provided as input. The bounding volume is calculated by evaluating all the geometries of the feature and its "contained"
subfeatures across all LoDs, including implicit geometries. The returned geometry is the minimal 3D rectangle that
encloses the feature, and it can be directly used as the value for the <code>envelope</code> column of the <code>FEATURE</code> table.</p>
<p>The <code>get_feature_envelope</code> function offers two optional parameters: The <code>set_envelope</code> parameter specifies whether the
computed envelopes should be used to update the <code>envelope</code> columns of the feature and its subfeatures (<code>1</code> for true, <code>0</code> for
false; default: <code>0</code>). The <code>schema_name</code> parameter defines the target database schema to operate in, as explained above
(default: <code>citydb</code>).</p>
<p>The 3D bounding volume of implicit geometries can be calculated using the <code>calc_implicit_geometry_envelope</code> function. It
requires the following inputs: the primary key <code>id</code> of the template geometry from the <code>GEOMETRY_DATA</code> table, a PostGIS <code>POINT</code>
geometry specifying the real-world coordinates where the template should be placed (<code>ref_pt</code>), and a 3x4 row-major matrix (JSON
double array) defining the rotation, scaling, and translation for the template (<code>matrix</code>).</p>
<p>The reference point and transformation matrix follow the format used for storing them in the <code>PROPERTY</code> table
(see <a href="../feature-module/#relationships">here</a>). Therefore, the values from the <code>PROPERTY</code> table can be
directly used as input parameters.</p>
<p>The <code>update_bounds</code> and <code>box2envelope</code> functions are utility functions used by the functions mentioned above. However, they
can also be used on their own to update a bounding box based on another or to convert a PostGIS <code>BOX3D</code> geometry into the
envelope representation needed for the envelope column in the FEATURE table.</p>
<h2 id="crs-functions"><abbr title="Coordinate Reference System">CRS</abbr> functions<a class="headerlink" href="#crs-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The <code>citydb_pkg</code> package provides functions for performing <abbr title="Coordinate Reference System">CRS</abbr> operations on a 3DCityDB instance.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>change_schema_srid</code></strong><br/><code>(schema_srid INTEGER, schema_srs_name TEXT, transform INTEGER, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Updates the coordinate system for a database schema</td>
</tr>
<tr>
<td><strong><code>change_column_srid</code></strong><br/><code>(table_name TEXT, column_name TEXT, dim INTEGER, schema_srid INTEGER, transform INTEGER, geom_type TEXT, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Updates the coordinate system for a geometry column</td>
</tr>
<tr>
<td><strong><code>check_srid</code></strong><br/><code>(srsno INTEGER)</code></td>
<td><code>TEXT</code></td>
<td>Checks if a given <code>SRID</code> is valid</td>
</tr>
<tr>
<td><strong><code>is_coord_ref_sys_3d</code></strong><br/><code>(schema_srid INTEGER)</code></td>
<td><code>INTEGER</code></td>
<td>Checks if a a <abbr title="Coordinate Reference System">CRS</abbr> is a true 3D system</td>
</tr>
<tr>
<td><strong><code>is_db_coord_ref_sys_3d</code></strong><br/><code>(schema_name TEXT)</code></td>
<td><code>INTEGER</code></td>
<td>Checks if the <abbr title="Coordinate Reference System">CRS</abbr> of the 3DCityDB is true 3D system</td>
</tr>
</tbody>
</table>
<p>The primary function is <code>change_schema_srid</code>, which changes the <abbr title="Coordinate Reference System">CRS</abbr> for all geometry columns within the 3DCityDB.
It takes the database-specifc <code>SRID</code> (<strong>S</strong>patial <strong>R</strong>eference <strong>ID</strong>) of the new <abbr title="Coordinate Reference System">CRS</abbr> and its <abbr title="Open Geospatial Consortium">OGC</abbr>-compliant name as inputs.</p>
<p>The function operates in two modes, determined by the value of the <code>transform</code> parameter:</p>
<ul>
<li><strong>Update metadata only:</strong> Changes the geometry <abbr title="Spatial Reference ID">SRID</abbr> in the database metadata without transforming coordinates (<code>transform = 0</code>, default).</li>
<li><strong>Transform coordinates:</strong> Additionally transforms the coordinates of geometries already stored in the database to the new <abbr title="Spatial Reference ID">SRID</abbr> (<code>transform = 1</code>).</li>
</ul>
<p>Both modes serve different purposes. For example, if you accidentally set up your 3DCityDB <code>v5</code> with an incorrect <abbr title="Spatial Reference ID">SRID</abbr>
that does not match the <abbr title="Coordinate Reference System">CRS</abbr> of the imported geometries, updating only the metadata is sufficient since the coordinates
are already in the correct <abbr title="Spatial Reference ID">SRID</abbr>. However, if the geometries are stored in the current <abbr title="Spatial Reference ID">SRID</abbr> of the 3DCityDB but need to
be converted to another <abbr title="Coordinate Reference System">CRS</abbr>, the second option is required to transform the coordinates accordingly.</p>
<p>As the final step, <code>change_schema_srid</code> automatically updates the metadata in the <a href="../metadata-module/#database_srs-table"><code>DATABASE_SRS</code></a>
table with the new values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Regardless of the selected operation mode, changing the <abbr title="Coordinate Reference System">CRS</abbr> of a 3DCityDB <code>v5</code> always involves dropping and re-creating
spatial indexes on the geometry columns to maintain consistency with the new <abbr title="Coordinate Reference System">CRS</abbr>. As a result, the process can be
time-consuming depending on the table size.</p>
</div>
<h2 id="database-constraint-functions">Database constraint functions<a class="headerlink" href="#database-constraint-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The <code>citydb_pkg</code> package provides functions to set database constraints or modify their behavior.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>set_enabled_fkey</code></strong><br/><code>(fkey_trigger_oid OID, enable BOOLEAN)</code></td>
<td><code>SETOF VOID</code></td>
<td>Enables or disables a given foreign key constraint</td>
</tr>
<tr>
<td><strong><code>set_enabled_geom_fkeys</code></strong><br/><code>(enable BOOLEAN, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Enables/disables references to <code>GEOMETRY_DATA</code> table</td>
</tr>
<tr>
<td><strong><code>set_enabled_schema_fkeys</code></strong><br/><code>(enable BOOLEAN, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Enables/disables all foreign keys in a given schema</td>
</tr>
<tr>
<td><strong><code>set_fkey_delete_rule</code></strong><br/><code>(fkey_name TEXT, table_name TEXT, column_name TEXT, ref_table TEXT, ref_column TEXT, on_delete_param CHAR, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Removes a constraint to add it again with given <code>ON DELETE</code> parameter</td>
</tr>
<tr>
<td><strong><code>set_schema_fkeys_delete_rule</code></strong><br/><code>(on_delete_param CHAR, schema_name TEXT)</code></td>
<td><code>SETOF VOID</code></td>
<td>Updates all the constraints in the specified schema</td>
</tr>
</tbody>
</table>
<p>Users can temporarily disable specific foreign key relationships between tables, such as those referencing
the <code>GEOMETRY_DATA</code> table. While the constraints remain in place, disabling them can significantly improve performance for bulk write
operations, such as importing large volumes of city objects. It is also possible to modify the delete rule of
foreign keys, changing it from <code>ON DELETE NO ACTION</code> (use <code>'a'</code> as input) to <code>ON DELETE SET NULL</code> (<code>'n'</code>) or
<code>ON DELETE CASCADE</code> (<code>'c'</code>). Switching the delete rule removes and recreates the foreign key constraint.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use these functions with caution. Disabling foreign key constraints may lead to data inconsistencies, and modifying
their delete rules can introduce unintended side effects. For example, the delete functions rely on cascading deletes,
so disabling this could cause them to malfunction. Similar issues may arise with other database operations.</p>
</div>
<h2 id="utility-functions">Utility functions<a class="headerlink" href="#utility-functions" title="Link to this headline for referencing">&para;</a></h2>
<p>The <code>citydb_pkg</code> package also provides various utility functions as shown below.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>citydb_version</code></strong><br/><code>(OUT version TEXT, OUT major_version INTEGER, OUT minor_version INTEGER, OUT minor_revision INTEGER)</code></td>
<td><code>RECORD</code></td>
<td>Returns the version of the 3DCityDB instance</td>
</tr>
<tr>
<td><strong><code>db_metadata</code></strong><br/><code>(schema_name TEXT, OUT srid INTEGER, OUT srs_name TEXT, OUT coord_ref_sys_name TEXT, OUT coord_ref_sys_kind TEXT, OUT wktext TEXT, OUT versioning TEXT)</code></td>
<td><code>RECORD</code></td>
<td>Returns meta information about the 3DCityDB instance</td>
</tr>
<tr>
<td><strong><code>get_seq_values</code></strong><br/><code>(seq_name TEXT,seq_count BIGINT)</code></td>
<td><code>SETOF BIGINT</code></td>
<td>Returns <code>n</code> sequence values from the given sequence</td>
</tr>
<tr>
<td><strong><code>get_child_objectclass_ids</code></strong><br/><code>(class_id INTEGER,skip_abstract INTEGER, schema_name TEXT)</code></td>
<td><code>SETOF INTEGER</code></td>
<td>Returns the <code>id</code> values of all transitive subclasses of the given object class</td>
</tr>
</tbody>
</table>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../db-scripts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Database scripts">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Database scripts
              </div>
            </div>
          </a>
        
        
          
          <a href="../docker/" class="md-footer__link md-footer__link--next" aria-label="Next: 3DCityDB Docker">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                3DCityDB Docker
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      3DCityDB Steering Group, 2025
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.top", "navigation.tracking", "toc.follow", "content.code.select", "content.code.copy", "content.code.annotate", "content.tooltips", "search.suggest", "search.highlight", "search.share", "header.autohide", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../assets/javascripts/tablesort.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../assets/javascripts/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>